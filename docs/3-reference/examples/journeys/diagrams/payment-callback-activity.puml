@startuml
!include journey-diagram-theme.puml
title payment-callback â€“ client activity flow

start

:Client sends\nPOST /api/v1/journeys/payment-callback/start;
:Journeys API returns\nJourneyStatus at waitForCallback\n(phase = Running);

... later, payment provider callback ...

:Provider calls\nPOST /api/v1/journeys/{journeyId}/steps/waitForCallback;
:Journeys API processes callback\nand updates JourneyStatus;

:Client calls\nGET /api/v1/journeys/{journeyId}/result;
:Journeys API returns\nJourneyOutcome with phase and output;

stop

@enduml
