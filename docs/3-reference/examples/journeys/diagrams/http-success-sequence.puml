@startuml
!include journey-diagram-theme.puml
title http-success â€“ happy path sequence

actor "API client" as Client
participant "Journeys API" as Journeys
participant "Upstream API" as Upstream

Client -> Journeys: POST /api/v1/journeys/http-success/start\nbody { inputId }
note right of Journeys
  Creates a new journey instance
  and persists initial state.
end note

Journeys -> Upstream: GET /items/{inputId}
Upstream --> Journeys: 200 OK\nbody { ... }

Journeys -> Journeys: Evaluate context.api.ok == true
Journeys --> Client: 202 Accepted\nJourneyStartResponse (journeyId, ...)

Client -> Journeys: GET /api/v1/journeys/{journeyId}/result
Journeys -> Journeys: Wait until journey is terminal
Journeys --> Client: 200 OK\nJourneyOutcome (phase = Succeeded,\noutput.ok == true)

@enduml

