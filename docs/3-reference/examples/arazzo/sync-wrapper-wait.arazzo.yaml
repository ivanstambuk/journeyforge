arazzo: 1.0.1
info:
  title: JourneyForge â€“ sync-wrapper-wait workflows
  version: 0.1.0
  summary: Workflows for long-running operations wrapped by a manual wait step.
sourceDescriptions:
  - name: syncWrapperWait
    type: openapi
    url: ../oas/sync-wrapper-wait.openapi.yaml
workflows:
  sync-wrapper-wait-happy-path:
    summary: Start a sync-wrapper-wait journey, submit a completion event, and retrieve the final result.
    sourceDescriptions:
      - syncWrapperWait
    inputs:
      startRequest:
        description: Initial payload for the sync-wrapper-wait journey.
        schema:
          type: object
          properties:
            status:
              type: string
          additionalProperties: true
      completionEvent:
        description: Completion event for the waitStep, marking the operation as DONE.
        schema:
          type: object
          properties:
            status:
              type: string
          additionalProperties: true
    steps:
      - name: startJourney
        description: Start a new sync-wrapper-wait journey instance.
        call:
          source: syncWrapperWait
          operationId: syncWrapperWait_start
        parameters:
          requestBody: $inputs.startRequest
        outputs:
          journeyId: $response.body.journeyId
      - name: submitCompletionEvent
        description: Submit a completion event to the waitStep.
        call:
          source: syncWrapperWait
          operationId: syncWrapperWait_waitStep
        parameters:
          path:
            journeyId: $steps.startJourney.outputs.journeyId
          requestBody: $inputs.completionEvent
        outputs:
          phase: $response.body.phase
      - name: getResult
        description: Retrieve the final outcome after the wait step completes.
        call:
          source: syncWrapperWait
          operationId: syncWrapperWait_getResult
        parameters:
          path:
            journeyId: $steps.startJourney.outputs.journeyId

