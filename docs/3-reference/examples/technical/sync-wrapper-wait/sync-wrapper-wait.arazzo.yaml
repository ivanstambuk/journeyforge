arazzo: 1.0.1
info:
  title: JourneyForge â€“ sync-wrapper-wait workflows
  version: 0.1.0
  summary: Workflows for long-running operations wrapped by a manual wait step.
  description: Workflows for long-running operations wrapped by a manual wait step.
sourceDescriptions:
  - name: syncWrapperWait
    type: openapi
    url: sync-wrapper-wait.openapi.yaml
workflows:
  - workflowId: sync-wrapper-wait-happy-path
    summary: Start a sync-wrapper-wait journey, submit a completion event, and retrieve the final result.
    description: Start a sync-wrapper-wait journey, submit a completion event, and retrieve the final result.
    inputs:
      type: object
      properties:
        startRequest:
          description: Initial payload for the sync-wrapper-wait journey.
          type: object
          properties:
            status:
              type: string
          additionalProperties: true
        completionEvent:
          description: Completion event for the waitStep, marking the operation as DONE.
          type: object
          properties:
            status:
              type: string
          additionalProperties: true
    steps:
      - stepId: startJourney
        description: Start a new sync-wrapper-wait journey instance.
        operationId: syncWrapperWait_start
        x-source: syncWrapperWait
        requestBody:
          contentType: application/json
          payload: $inputs.startRequest
        outputs:
          journeyId: $response.body.journeyId
      - stepId: submitCompletionEvent
        description: Submit a completion event to the waitStep.
        operationId: syncWrapperWait_waitStep
        x-source: syncWrapperWait
        parameters:
          - name: journeyId
            in: path
            value: $steps.startJourney.outputs.journeyId
        requestBody:
          contentType: application/json
          payload: $inputs.completionEvent
        outputs:
          phase: $response.body.phase
      - stepId: getResult
        description: Retrieve the final outcome after the wait step completes.
        operationId: syncWrapperWait_getResult
        x-source: syncWrapperWait
        parameters:
          - name: journeyId
            in: path
            value: $steps.startJourney.outputs.journeyId
